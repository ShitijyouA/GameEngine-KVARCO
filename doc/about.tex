\documentclass[b5j,12pt]{jsarticle}

\pagestyle{myheadings}
\markright{\footnotesize \sf KVARCO - A game engine for embeddable scripting language Xtal}

%
% macro ルビ usage: \ruby{漢}{かん}\ruby{字}{じ}
%
\def\ruby#1#2{%
\leavevmode
\setbox0=\hbox{#1}\setbox1=\hbox{\tiny#2}%
\ifdim\wd0>\wd1 \dimen0=\wd0 \else \dimen0=\wd1 \fi
\hbox{\kanjiskip=\fill
\vbox{\hbox to \dimen0{\tiny \hfil#2\hfil}%
\nointerlineskip
\hbox to \dimen0{\hfil#1\hfil}}}}

\setlength{\headheight}{1zh}

\begin{document}

	\begin{titlepage}
		\begin{center}
		
			\footnotesize{A game engine for embeddable scripting language Xtal} \\
			\vspace{1zh}
			{\huge KVARCO} \\
			
			\small \bigskip
			\ruby{七}{シチ}\ruby{条}{ジョウ}\ \ruby{彰}{アキ}\ruby{規}{ノリ} \\
			
			\today
		\end{center}
	\end{titlepage}

	\newpage
	
	\section{前書き}
		\subsection{開発の動機}
			私は一度、一人でゲームエンジンを作らずにC++だけでシューティングゲームを作ったことがある。
			そのゲームに敵を追加する場面で、あまりの煩雑さに私は音を上げて満足に作る前に放り出してしまった。
			放り出す前、私はどうにか敵のパラメータの変更を楽にしようとCSVファイルに敵のパラメータを書きだすことを開発を楽にしようと試みたが、
			それでも煩雑すぎた。
			その時の苦悩をチャットである友人にぶちまけていたとき、その友人はこう言った。

			\medskip
			「組み込みスクリプト言語使ったらいいじゃん。Lua\footnote{読みは「ルア」。ポルトガル語で月という意味。}とか」
			\medskip

			少し調べてから、私は急に目の前が開けたような気がした。
			感激してそのまま私は調査を続けた。
			その結果Lua以外にも組み込みスクリプト言語が有ることを知り、
			数日のうちに専門書籍を買って本格的に組み込みスクリプト言語を活用したゲーム開発を目指した。
			
			\par
			だが、Luaは私にはとても扱いづらく感じられた。
			その後ある開発者がLuaの不満点を改善して作られたという
			Squirrel\footnote{読みは「スクアール」英語でリスという意味。}というものも試してみたが、
			私が思っていた不満点は改善されていなかった。
			
			こうしてまた壁にぶつかった頃、私も登録していたtwitterで、ある新しい組み込みスクリプト言語が便利で使い易いという話を目にした。
			はたして、それは私が思っていた不満点を全て解決していた。
			これがKVARCOにも採用されたXtal\footnote{読みは「クリスタル」である。知られている通り、水晶のことだ}である。
			
			\par
			早速私はXtalを使ってゲーム開発をしようと思い立った。
			幸い、C++だけでつくろうとして頓挫したゲームのコードが在ったため、私はこれを活用しようと思って一度ゲーム用ライブラリを作った。
			その後更に、「どうせなら汎用ゲームエンジンみたいなものも作ってしまえば次にゲームを作るとき楽だよな」と考えた。
			これがKVARCO開発の動機だ。
			
			\par
			後継である``Rezino"では更に汎用性が高い「超汎用ゲームエンジン」が目標に設定されている。
		
		\subsection{目標}
			Xtalが使える十分な機能を持ったゲームエンジン
			
		\subsection{名前の由来}
			``kvarco"
			\footnote{読みは「クヴァルコ」。綴りと読みが完全に一致するのはエスペラント語の特徴だ}は
			エスペラント語で「水晶」(正確にはロッククリスタル)という意味。
			
			\par
			「目標」で述べた通り、KVARCOの主要な機能は「Xtalが使える」という事だった。
			そのため、ゲームエンジンの名前も``Xtal"、即ち「水晶」と関連がある言葉にしようと思い、
			調べ、悩んだ結果、エスペラント語からそのまま「水晶」を意味する単語を引いてきたのである。
			
			\par
			ちなみにエスペラント語での「クリスタル」は正確には``kristalo""\footnote{読みは「クリスタロ」}である。
			こちらはエスペラント語が分からなくても「クリスタルって意味だな」とわかってしまうため、
			当時の私は少しニュアンスが違い、綴りが全く違う``kvarco"を選んだ。こちらはエスペラント語でロッククリスタルという意味だ。
			
			\par
			さらに、なぜエスペラント語なのかというと、正直言って当時の私が「カッコイイと思ったから」である。
			これでは中学生が何でも英語で言ってみたくなるのと同じだ。
			さらにさらに、全て大文字である理由は、twitterでのポストによると「デザイン上の理由」とのことである。
			すなわち、KVARCOのアイコンを作ったとき全て大文字であるほうが良いように思えた、というだけだ。
			当時の私はこんなにも考えが浅かった。今は改善されていると思いたい。
		
	\section{機能}
		\begin{description}
				\item[アクターシステム]\mbox{}\\
					アクター(実体はファイバー。他の言語ではコルーチンなどと呼ばれる)の並行実行と管理を行う事ができる
					
				\item[レイヤーシステム]\mbox{}\\
					描画関数をもったアクターを管理し、その描画順序を簡単に管理できるレイヤーを提供する
					
				\item[衝突判定]\mbox{}\\
					多角形同士の衝突判定を行う。凸多面体だけでなく、凹多面体でも判定できる
					
				\item[テクスチャマネージャ]\mbox{}\\
					テクスチャの読み込み、管理、操作のための機能を提供する。
					一度読みこめば、関連付けたテクスチャ名をキーにして取得できる。
					アーカイバに指定した名前の画像ファイルがあれば、自動的にそちらを読み込む
					
				\item[マルチスレッド画像ローディング]\mbox{}\\
					マルチスレッドで画像を読み込む
					
				\item[シーンマネージャ]\mbox{}\\
					シーンを管理する。シーン遷移は全て各シーンに委ねられる。
					「今のシーンから次のシーンへ」という移動しかできない
					
				\item[オーディオマネージャ]\mbox{}\\
					ogg vorbisオーディオファイルの読み込み、管理、再生のための機能を提供する。
					BGMとして読みこめば、マルチスレッドでストリーム再生できる。
					SEは一度読みこめば何度でも素早く再生できる。
					すべての操作は、読み込み時につける操作対象のオーディオ名を指定して行う。
					アーカイバのオーディオファイルは読み込めない
				
				\item[暗号化機能付きアーカイバ]\mbox{}\\
					リソース向けのアーカイバで、暗号化と圧縮をかけられる。
					Arcfour
					\footnote{	RC4とも言う。無線LANの暗号化にも使われている。
								こちらは脆弱性が騒がれているが、キーが64bit(半角文字8個に相当)しかないので当然と言える}
					というアルゴリズムで暗号化し、gzip方式で圧縮している。
					暗号化キーの長さはArcfourで扱える最大長と同じ、2048bit。これは半角文字256個に相当する。
					アーカイブは別プログラム(添付されている)で行う
		\end{description}
		
		\section{詳細}
			\begin{description}
			
				\item[GitHubリポジトリ]\mbox{}\\
					https://github.com/ShitijyouA/GameEngine-KVARCO
					
			\end{description}

\end{document}